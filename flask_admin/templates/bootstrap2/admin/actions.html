{% import 'admin/static.html' as admin_static with context %}

{% macro dropdown(actions, btn_class='dropdown-toggle') -%}
    <li class="dropdown">
        <a class="{{ btn_class }}" data-toggle="dropdown" href="javascript:void(0)">{{ _gettext('With selected') }}<b class="caret"></b></a>
        <ul class="dropdown-menu">
            {% for action in actions %}
                {# determine if action is dropdown #}
                {% if action[2] %}
                <li>
                    <a href="javascript:void(0)" onclick="return modelActions.execute('{{ action[0] }}');">{{ _gettext(action[1]) }}</a>
                </li>
                {% endif %}
            {% endfor %}
        </ul>
    </li>
{% endmacro %}

{% macro buttons(actions) -%}
    {% for action in actions %}
        {# determine if action is not dropdown #}
        {% if not action[2] %}
        <li>
            <a href="#" onclick="return modelActions.execute('{{ action[0] }}');">
                {{ _gettext(action[1]) }}
            </a>
        </li>
        {% endif %}
    {% endfor %}
{% endmacro %}

{% macro form(actions, url) %}
    {% if actions %}
    <form id="action_form" action="{{ url }}" method="GET" style="display: none">
        {% if csrf_token %}
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        {% endif %}
        <input type="hidden" id="action" name="action" />
    </form>
    {% endif %}
{% endmacro %}

{% macro script(message, actions, actions_confirmation) %}
    {% if actions %}
    <script src="{{ admin_static.url(filename='admin/js/actions-1.0.0.js') }}"></script>
    <script language="javascript">
        var modelActions = new AdminModelActions({{ message|tojson|safe }}, {{ actions_confirmation|tojson|safe }});
    </script>
    {% endif %}
{% endmacro %}
